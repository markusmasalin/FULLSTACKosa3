{"version":3,"sources":["services/names.js","components/Persons.js","App.js","index.js"],"names":["baseUrl","names","axios","get","then","response","data","newObject","post","id","put","concat","delete","Persons","_ref","rows","deleteNumber","map","person","react_default","a","createElement","key","name","number","value","onClick","ErrorNotification","message","style","color","background","fontSize","border","padding","margin","SuccessNotification","_ref2","Filter","_ref3","filterInput","handleFilter","console","log","onChange","PersonForm","_ref4","addName","newName","handleNameChange","newNumber","handleNumberChange","onSubmit","type","App","_useState","useState","_useState2","Object","slicedToArray","persons","setPersons","_useState3","_useState4","setNewName","_useState5","_useState6","setNewNumber","_useState7","_useState8","setNewFilterInput","_useState9","_useState10","errorMessage","setErrorMessage","_useState11","_useState12","successMessage","setSuccessMessage","useEffect","nameService","initialNames","length","namesToShow","filter","toLowerCase","includes","App_ErrorNotification","App_SuccessNotification","App_Filter","event","target","App_PersonForm","preventDefault","nameObject","found","forEach","item","window","confirm","updatedPerson","find","n","changedNumber","objectSpread","returnedName","setTimeout","catch","error","components_Persons","deleteId","parseInt","findDeletedId","err","ReactDOM","render","src_App","document","getElementById"],"mappings":"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","file":"static/js/main.cd205691.chunk.js","sourcesContent":["import axios from 'axios'\nconst baseUrl = 'http://localhost:3001/api/persons'\n\nconst getAll = () => {\n    const request = axios.get(baseUrl)\n    return request.then(response => response.data)\n}\n\n\nconst create = newObject => {\n    const request = axios.post(baseUrl, newObject)\n    return request.then(response => response.data)\n}\n\nconst update = (id, newObject) => {\n    const request = axios.put(`${baseUrl}/${id}`, newObject)\n    return request.then(response => response.data)\n}\n\nconst deleteName = (id) => {\n    const request = axios.delete(`${baseUrl}/${id}`)\n    return request.then(response => response.data)\n}\n\nexport default { getAll,create,update, deleteName }","import React from \"react\"\n\nconst Persons = ({ rows, deleteNumber}) => {\n    return rows.map(person => \n        <div key={person.id}>\n        {person.name} {person.number}\n        <button value={person.id}  onClick={deleteNumber}>delete</button>\n        </div>     \n    );\n} \n\nexport default Persons\n\n\n\n\n\n","import React, { useState, useEffect } from 'react'\nimport nameService from './services/names'\nimport Persons from './components/Persons'\n\nconst ErrorNotification = ({ message }) => {\n  const errorStyle = {\n    color: 'red',\n    background: 'lightgrey',\n    fontSize: 20,\n    border: 'solid',\n    padding: '10px',\n    margin: '10px'\n  }\n  if (message === '') {\n    return null\n  }\n  if (message === null) {\n    return null\n  }\n\n  return (\n    <div style={errorStyle}>\n      {message}\n    </div>\n  )\n}\n\nconst SuccessNotification = ({ message }) => {\n  const successStyle = {\n    color: 'green',\n    background: 'lightgrey',\n    fontSize: 20,\n    border: 'solid',\n    padding: '10px',\n    margin: '10px'\n  }\n  if (message === '') {\n    return null\n  }\n  \n  return (\n    <div style={successStyle}>\n      {message}\n    </div>\n  )\n}\n\n\nconst Filter = ({filterInput, handleFilter}) => {\n    console.log(filterInput)    \n    return (\n        <form>\n            rajaa näytettäviä\n            <input \n                value={filterInput}\n                onChange={handleFilter}\n            />\n        </form>\n    )\n}\n\nconst PersonForm = ({addName, newName, handleNameChange, newNumber, handleNumberChange}) => {\n    return (\n        <form onSubmit={addName}>\n            <div>\n                <h3>lisää nimiä</h3>\n                nimi: <input \n                value={newName}\n                onChange={handleNameChange}\n                />\n            </div>\n            <div>numero: <input \n                value={newNumber}\n                onChange={handleNumberChange}\n                />\n            </div>\n            <div>\n                <button type=\"submit\">lisää</button>\n            </div>\n        </form>\n    )\n}\n\nconst App = () => {\n    const [persons, setPersons] = useState([])\n    const [ newName, setNewName ] = useState('')\n    const [ newNumber, setNewNumber] = useState('')\n    const [filterInput, setNewFilterInput] = useState('')\n    const [errorMessage, setErrorMessage] = useState('')\n    const [successMessage, setSuccessMessage] = useState('')\n\n    useEffect(() => {\n      nameService\n      .getAll().then(initialNames => {\n        setPersons(initialNames)\n      })\n    }, [])\n    console.log('render', persons.length, 'persons')\n\n    const namesToShow = persons.filter(person => person.name.toLowerCase().includes(filterInput.toLowerCase()))\n    \n    const deleteNumber = (event) => {\n      event.preventDefault()\n      const deleteId = parseInt(event.target.value)\n      const findDeletedId = persons.filter(name => name.id === deleteId)\n      if (window.confirm(\"Delete \" + findDeletedId[0].name)) { \n        nameService\n            .deleteName(deleteId).then(response => {\n              setPersons(persons.filter(name => name.id !== deleteId))\n              setSuccessMessage(\n                `${findDeletedId[0].name} is deleted from the phonebook`\n              )\n              setTimeout(() => {\n                setSuccessMessage(null)\n              }, 5000)\n            })\n            .catch(err => {\n              setErrorMessage(\n                `Name ${deleteId.name} was already removed from server`\n              )\n              setTimeout(() => {\n                setErrorMessage(null)\n              }, 5000)\n            })\n      }\n    }\n    const addName = (event) => {\n        event.preventDefault()\n        const nameObject = {\n            name: newName,\n            number: newNumber\n        }\n        var found=false;\n        persons.forEach(function(item){\n            if(item.name === nameObject.name){\n                found=true;               \n            }\n        })\n        if (found===true){\n          if (window.confirm(`${newName} is already added to phonebook, replace the old number with a new one?`)){\n            const updatedPerson = persons.find(n => n.name === newName)  \n            const changedNumber = { ...updatedPerson, number: nameObject.number}   \n              nameService\n                .update(updatedPerson.id, changedNumber).then(returnedName => {\n                  setSuccessMessage(\n                    `The number of '${updatedPerson.name}' is updated to server`\n                  )\n                  setTimeout(() => {\n                    setSuccessMessage(null)\n                  }, 5000)\n                  setPersons(persons.map(name => name.id !== updatedPerson.id ? name : returnedName))      \n                })\n                .catch(error => {\n                  setErrorMessage(\n                    `Name '${updatedPerson.name}' was already removed from phonebook`\n                  )\n                  setTimeout(() => {\n                    setErrorMessage(null)\n                  }, 5000)\n                  setPersons(persons.filter(n => n.id !== updatedPerson.id))\n                })\n          }\n        } \n        if (found===false){\n            setPersons(persons.concat(nameObject))\n            setNewNumber('')\n            setNewName('')\n        \n            nameService\n              .create(nameObject).then(returnedName => {\n                  setPersons(persons.concat(returnedName))\n                  setNewName('')\n                  setSuccessMessage(\n                    `${nameObject.name} is added to phonebook`\n                  )\n                  setTimeout(() => {\n                    setErrorMessage(null)\n                  }, 5000)\n                })\n              .catch(error => {\n                setErrorMessage(\n                  `Ups, something went wrong. Try to add  '${nameObject.name}' again`\n                )\n                setTimeout(() => {\n                  setErrorMessage(null)\n                }, 5000)\n              })\n          }\n    }\n\n    const handleNameChange = (event) => {\n        console.log(event.target.value)\n        setNewName(event.target.value)\n    }\n    const handleNumberChange = (event) => {\n        console.log(event.target.value)\n        setNewNumber(event.target.value)\n    }\n    const handleFilter = (event) => {\n        console.log(event.target.value)\n        setNewFilterInput(event.target.value)\n    }\n    \n    return (\n        <div>\n        <h2>Puhelinluettelo</h2> \n        <ErrorNotification message={errorMessage} />\n        <SuccessNotification message={successMessage} />\n\n        <Filter filterInput={filterInput} handleFilter={handleFilter}/>  \n        <PersonForm \n            addName={addName}\n            newName={newName}\n            handleNameChange={handleNameChange}\n            newNumber={newNumber}\n            handleNumberChange={handleNumberChange}    \n            />\n        <h3>Numerot</h3>\n        <Persons rows={namesToShow} deleteNumber={deleteNumber}   />      \n        </div>\n    )\n}\nexport default App\n\n\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './App'\n\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root')\n)\n"],"sourceRoot":""}