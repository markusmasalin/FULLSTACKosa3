{"version":3,"sources":["services/names.js","components/Persons.js","App.js","index.js"],"names":["baseUrl","names","axios","get","then","response","data","newObject","post","id","put","concat","delete","Persons","props","persons","map","p","react_default","a","createElement","key","name","number","onClick","deletePerson","Notification","_ref","notification","message","style","color","type","background","fontSize","borderStyle","borderRadius","padding","margin","Filter","_ref2","filterInput","handleFilter","console","log","value","onChange","PersonForm","_ref3","handleSubmit","newName","handleNameChange","newNumber","handleNumberChange","onSubmit","App","_useState","useState","_useState2","Object","slicedToArray","setPersons","_useState3","_useState4","setNewName","_useState5","_useState6","setNewNumber","_useState7","_useState8","setNewFilterInput","_useState9","_useState10","setNotification","useEffect","nameService","initialNames","length","notify","arguments","undefined","setTimeout","namesToShow","filter","person","toLowerCase","includes","App_Notification","App_Filter","event","target","App_PersonForm","preventDefault","existingPerson","find","window","confirm","objectSpread","returnedName","catch","n","error","components_Persons","ReactDOM","render","src_App","document","getElementById"],"mappings":"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","file":"static/js/main.6202b10d.chunk.js","sourcesContent":["import axios from 'axios'\nconst baseUrl = '/api/persons'\n\nconst getAll = () => {\n    const request = axios.get(baseUrl)\n    return request.then(response => response.data)\n}\n\n\nconst create = newObject => {\n    const request = axios.post(baseUrl, newObject)\n    return request.then(response => response.data)\n}\n\nconst update = (id, newObject) => {\n    const request = axios.put(`${baseUrl}/${id}`, newObject)\n    return request.then(response => response.data)\n}\n\nconst deleteName = (id) => {\n    const request = axios.delete(`${baseUrl}/${id}`)\n    return request.then(response => response.data)\n}\n\nexport default { getAll,create,update, deleteName }","import React from \"react\"\n\nconst Persons = (props) => {\n    return (\n        props.persons.map(p => \n            <div key={p.name}>\n            {p.name} {p.number} <button onClick={()=>props.deletePerson(p.id)}>delete</button>\n            </div>     \n        )\n    )\n} \n\n\n\n\n\nexport default Persons\n\n\n\n\n\n","import React, { useState, useEffect } from 'react'\nimport nameService from './services/names'\nimport Persons from './components/Persons'\n\nconst Notification = ({ notification }) => {\n  if (notification.message === null) {\n    return null\n  }\n  if (notification.message === '') {\n    return null\n  }\n\n  const style = {\n    color: notification.type === 'error' ? 'red' : 'green',\n    background: 'lightgrey',\n    fontSize: 20,\n    borderStyle: 'solid',\n    borderRadius: 5,\n    padding: 10,\n    margin: 10,\n  }\n\n  return (\n    <div style={style}>\n      {notification.message}\n    </div>\n  )\n}\n\nconst Filter = ({filterInput, handleFilter}) => {\n    console.log(filterInput)    \n    return (\n        <form>\n            rajaa näytettäviä\n            <input \n                value={filterInput}\n                onChange={handleFilter}\n            />\n        </form>\n    )\n}\n\n\n\nconst PersonForm = ({handleSubmit, newName, handleNameChange, newNumber, handleNumberChange}) => {\n    return (\n        <form onSubmit={handleSubmit}>\n            <div>\n                <h3>lisää nimiä</h3>\n                nimi: <input \n                value={newName}\n                onChange={handleNameChange}\n                />\n            </div>\n            <div>numero: <input \n                value={newNumber}\n                onChange={handleNumberChange}\n                />\n            </div>\n            <div>\n                <button type=\"submit\">lisää</button>\n            </div>\n        </form>\n    )\n}\n\nconst App = () => {\n    const [persons, setPersons] = useState([])\n    const [ newName, setNewName ] = useState('')\n    const [ newNumber, setNewNumber] = useState('')\n    const [filterInput, setNewFilterInput] = useState('')\n    const [notification, setNotification] = useState({\n      message:null\n    })\n    \n\n    useEffect(() => {\n      nameService\n      .getAll().then(initialNames => {\n        setPersons(initialNames)\n      })\n    }, [])\n    console.log('render', persons.length, 'persons')\n\n    const handleNameChange = (event) => {\n      console.log(event.target.value)\n      setNewName(event.target.value)\n    }\n    const handleNumberChange = (event) => {\n      console.log(event.target.value)\n      setNewNumber(event.target.value)\n    }\n    const handleFilter = (event) => {\n      console.log(event.target.value)\n      setNewFilterInput(event.target.value)\n    }\n\n    const notify = (message, type='success') => {\n      setNotification({ message, type })\n      setTimeout(() => setNotification({ message: null }), 10000)\n    }\n\n    \n    const handleSubmit = (event) => {\n      event.preventDefault()\n\n      const existingPerson = persons.find(p => p.name === newName)\n\n      if (existingPerson) {\n        const ok = window.confirm(`${newName} is already added to phonebook, replace the old number with a new one?`)\n\n        if (ok) {\n           \n          nameService\n                .update({ ...existingPerson, number: newNumber} ).then(returnedName => {\n                  setPersons(persons.map(p => p.name === newName ? returnedName : p))      \n                  setNewName('')\n                  setNewNumber('')\n                  notify(\n                    `The number of '${newName}' is updated to server`\n                  )\n                })\n                .catch(() => {\n                  setPersons(persons.filter(n => n.id !== existingPerson.id))\n                  notify(`Name '${newName}' was already removed from phonebook`)\n\n                })\n          }\n          return\n        }\n      \n        nameService\n              .create({\n                name: newName,\n                number: newNumber\n              })\n              .then(returnedName => {\n                  setPersons(persons.concat(returnedName))\n                  setNewName('')\n                  setNewNumber('')\n                  notify(\n                    `${returnedName} is added to phonebook`\n                  )\n                  \n                })\n                .catch(error => {\n                  console.log(error.response.data)\n                  console.log(error)\n     \n                  notify(\n                    `'${error.response.data.error}'`\n                  ) \n                })\n              }\n\n    const deletePerson = (id) => {\n      \n      const person = persons.find(p => p.id === id)\n      console.log(\"person\" + person)\n      console.log(\"id\" + id)\n      const ok = window.confirm(`Delete ${person.name}?`) \n      if (ok){ \n        nameService\n            .deleteName(id)\n            .then(() => {\n              setPersons(persons.filter(p => p.id !==id))\n            })\n        notify(`${person.name} is deleted from the phonebook`)\n      }\n    }\n/*\n        const nameObject = {\n            name: newName,\n            number: newNumber\n        }\n        var found=false;\n        persons.forEach(function(item){\n            if(item.name === nameObject.name){\n                found=true;               \n            }\n        })\n        if (found===true){\n          if (window.confirm(`${newName} is already added to phonebook, replace the old number with a new one?`)){\n            const updatedPerson = persons.find(n => n.name === newName)  \n            \n              nameService\n                .update(updatedPerson.id, changedNumber).then(returnedName => {\n                  setSuccessMessage(\n                    `The number of '${updatedPerson.name}' is updated to server`\n                  )\n                  setTimeout(() => {\n                    setSuccessMessage(null)\n                  }, 5000)\n                  setPersons(persons.map(name => name.id !== updatedPerson.id ? name : returnedName))      \n                })\n                .catch(error => {\n                  setErrorMessage(\n                    `Name '${updatedPerson.name}' was already removed from phonebook`\n                  )\n                  setTimeout(() => {\n                    setErrorMessage(null)\n                  }, 5000)\n                  setPersons(persons.filter(n => n.id !== updatedPerson.id))\n                })\n          }\n        } \n        if (found===false){\n            setPersons(persons.concat(nameObject))\n            setNewNumber('')\n            setNewName('')\n        \n            nameService\n              .create(nameObject).then(returnedName => {\n                  setPersons(persons.concat(returnedName))\n                  setNewName('')\n                  setSuccessMessage(\n                    `${nameObject.name} is added to phonebook`\n                  )\n                  setTimeout(() => {\n                    setErrorMessage(null)\n                  }, 5000)\n                })\n              .catch(error => {\n                setErrorMessage(\n                  `Ups, something went wrong. Try to add  '${nameObject.name}' again`\n                )\n                setTimeout(() => {\n                  setErrorMessage(null)\n                }, 5000)\n              })\n          }\n    }\n*/\n  \n    \n    const namesToShow = persons.filter(person => person.name.toLowerCase().includes(filterInput.toLowerCase()))\n    \n\n    return (\n        <div>\n        <h2>Puhelinluettelo</h2> \n        <Notification notification={notification} />\n       \n\n        <Filter filterInput={filterInput} handleFilter={handleFilter}/>  \n        <PersonForm \n            newName={newName}\n            newNumber={newNumber}\n            handleNameChange={handleNameChange}\n            handleSubmit={handleSubmit}\n            handleNumberChange={handleNumberChange}    \n            />\n        <h3>Numerot</h3>\n        <Persons persons={namesToShow} deletePerson={deletePerson}   />      \n        </div>\n    )\n}\nexport default App\n\n\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './App'\n\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root')\n)\n"],"sourceRoot":""}